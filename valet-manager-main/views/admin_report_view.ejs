<%- include('partials/header', { title: 'Shift Report Detail' }) %>
<%
  const formatDate = (d) => {
    try {
      return new Date(d).toLocaleDateString('en-US');
    } catch (e) {
      return d;
    }
  };
%>
<section class="page-header">
  <div>
    <p class="eyebrow">Shift report detail</p>
    <h2><%= report.valet_name %> - <%= formatDate(report.shift_date) %></h2>
    <p class="muted"><%= report.location_name || 'Unassigned location' %></p>
  </div>
  <div class="button-row">
    <a href="/admin/edit/<%= report.id %>" class="btn btn-ghost">Edit report</a>
    <a href="/admin/reports" class="btn btn-primary">Back to reports</a>
  </div>
</section>

<section class="card">
  <div class="detail-grid">
    <div>
      <span class="muted">Valet</span>
      <strong><%= report.valet_name %></strong>
    </div>
    <div>
      <span class="muted">Phone</span>
      <strong><%= report.phone %></strong>
    </div>
    <div>
      <span class="muted">Hours</span>
      <strong><%= report.hours %></strong>
    </div>
    <div>
      <span class="muted">Cars</span>
      <strong><%= report.cars %></strong>
    </div>
    <div>
      <span class="muted">Cash</span>
      <strong>$<%= Number(report.cash_tips || 0).toFixed(2) %></strong>
    </div>
    <div>
      <span class="muted">Digital</span>
      <strong>$<%= Number(report.online_tips || 0).toFixed(2) %></strong>
    </div>
  </div>
</section>

<section class="card">
  <h3>Shift Notes</h3>
  <% if (report.shift_notes) { %>
    <p><%= report.shift_notes %></p>
  <% } else { %>
    <p class="muted">No notes attached.</p>
  <% } %>
</section>

<section class="card">
  <h3>Screenshots</h3>
  <% if (!screenshots.length) { %>
    <p class="muted">No screenshots attached.</p>
  <% } %>
  <div class="screenshot-grid">
    <% screenshots.forEach(path => { %>
      <img src="/uploads/<%= path %>" alt="Shift screenshot">
    <% }) %>
  </div>
</section>

<section class="card danger">
  <h3>Remove report</h3>
  <p class="muted">This action is permanent.</p>
  <form action="/admin/delete/<%= report.id %>" method="POST" onsubmit="return confirm('Delete this shift report?');">
    <button type="submit" class="btn btn-danger">Delete report</button>
  </form>
</section>
<%- include('partials/footer') %>
