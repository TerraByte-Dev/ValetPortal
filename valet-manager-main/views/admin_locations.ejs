<%- include('partials/header', { title: 'Locations' }) %>
<section class="page-header">
  <div>
    <p class="eyebrow">Locations</p>
    <h2>Manage locations</h2>
    <p class="muted">Create locations, update lot fee defaults, and maintain trained valet rosters.</p>
  </div>
</section>

<section class="card">
  <% if (error) { %>
    <p class="alert alert-error"><%= error %></p>
  <% } %>
  <% if (message) { %>
    <p class="alert alert-success"><%= message %></p>
  <% } %>
  <h3>Add location</h3>
  <form action="/admin/locations/manage" method="POST" class="form-row">
    <div class="form-group">
      <label for="locationName">Location name</label>
      <input type="text" id="locationName" name="locationName" required>
    </div>
    <div class="form-group">
      <label for="lot_fee">Default lot fee</label>
      <input type="number" step="0.01" id="lot_fee" name="lot_fee" value="0">
    </div>
    <div class="btn-row">
      <button type="submit" class="btn btn-primary">Add</button>
    </div>
  </form>
</section>

<section class="location-manage-grid">
  <% if (!locations.length) { %>
    <div class="card empty-state">
      <h3>No locations yet</h3>
      <p class="muted">Create your first location to start assigning trained roster members.</p>
    </div>
  <% } %>
  <% locations.forEach(loc => { %>
    <a class="location-manage-card" href="/admin/locations/<%= loc.id %>/edit">
      <div>
        <h3><%= loc.name %></h3>
        <p class="muted">Trained roster: <%= Number(loc.roster_count || 0) %></p>
      </div>
      <span class="pill">Edit</span>
    </a>
  <% }) %>
</section>
<%- include('partials/footer') %>
